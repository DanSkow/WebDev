{
  "info": {
    "_postman_id": "cc4c34fa-6243-41fc-96a4-c5666c238cba",
    "name": "Postman Collection",
    "schema": "https://schema.getpostman.com/json/collection/v2.0.0/collection.json"
  },
  "item": [
    {
      "name": "Test_App",
      "item": [
        {
          "name": "Show App using AS3",
          "id": "c611f0d7-0ea7-462d-b6e9-baa4cd944693",
          "protocolProfileBehavior": {
            "disableBodyPruning": true
          },
          "request": {
            "method": "GET",
            "header": [],
            "url": "https://{{host}}/mgmt/shared/appsvcs/declare/{{App_Name}}"
          },
          "response": []
        },
        {
          "name": "Post using AS3",
          "event": [
            {
              "listen": "test",
              "script": {
                "exec": [
                  "pm.test(\"Results are success or no change\", function () {\r",
                  "    pm.expect(pm.response.json().results[0].message).to.be.oneOf([\"success\", \"no change\"]);\r",
                  "});"
                ],
                "type": "text/javascript",
                "id": "1a1640ba-6c52-414e-a9f3-1c27f618c212"
              }
            }
          ],
          "id": "655b667b-5ae3-4bd2-b5b3-4b475b170f0f",
          "protocolProfileBehavior": {
            "disableBodyPruning": true
          },
          "request": {
            "method": "POST",
            "header": [
              {
                "key": "Content-Type",
                "value": "application/json",
                "type": "text"
              }
            ],
            "body": {
              "mode": "raw",
              "raw": "{\r\n    \"class\": \"AS3\",\r\n    \"action\": \"deploy\",\r\n    \"persist\": true,\r\n    \"declaration\": {\r\n       \"class\": \"ADC\",\r\n       \"schemaVersion\": \"3.0.0\",\r\n       \"id\": \"urn:uuid:33045210-3ab8-4636-9b2a-c98d22ab915d\",\r\n       \"label\": \"\",\r\n       \"remark\": \"LTM SSL Bridging using existing Wildcard Certificate\",\r\n       \"{{App_Name}}\": {\r\n          \"class\": \"Tenant\",\r\n          \"remark\": \"Highlight Application Name, Right Click, Edit All Occurrences\",\r\n          \"{{App_Name}}\": {\r\n             \"class\": \"Application\",\r\n             \"{{App_Name}}\": {\r\n                \"class\": \"Service_HTTP\",\r\n               \"redirect80\": {{Redirect_80}},\r\n               \"profileHTTP\": {\r\n                   \"bigip\": \"/Common/Shared/AS3_http_encrypt-cookie\" },\r\n               \"virtualPort\": {{Virtual_Port}},\r\n               \"virtualAddresses\": [\"{{Virtual_IP}}\"],\r\n               \"snat\": \"auto\",\r\n               \"profileMultiplex\": {\r\n                 \"bigip\": \"/Common/oneconnect\" },\r\n               \"persistenceMethods\": [\"cookie\",\"source-address\"],\r\n                \"pool\": \"{{App_Name}}_Pool\" },\r\n             \"{{App_Name}}_Pool\": {\r\n                \"class\": \"Pool\",\r\n                \"monitors\": [\"https\"],\r\n                \"members\": [{\r\n                   \"servicePort\": {{Server_Port}},\r\n                   \"serverAddresses\": [\"{{Server_IPs}}\"]\r\n                }]\r\n             }\r\n             }\r\n          }\r\n       }\r\n }"
            },
            "url": "https://{{host}}/mgmt/shared/appsvcs/declare"
          },
          "response": []
        },
        {
          "name": "Delete App using AS3",
          "id": "5ea3359d-62b2-49e1-98bf-208896b21c4f",
          "protocolProfileBehavior": {
            "disableBodyPruning": true
          },
          "request": {
            "method": "DELETE",
            "header": [],
            "url": "https://{{host}}/mgmt/shared/appsvcs/declare/{{App_Name}}"
          },
          "response": []
        }
      ],
      "id": "adf8a6f5-f6c4-491a-80a5-c0312e8f4b2c",
      "event": [
        {
          "listen": "prerequest",
          "script": {
            "type": "text/javascript",
            "exec": [
              "pm.collectionVariables.set(\"App_Name\", \"Test_App\");",
              "pm.collectionVariables.set(\"Virtual_IP\", \"172.21.107.22\");",
              "pm.collectionVariables.set(\"Virtual_Port\", \"443\");",
              "pm.collectionVariables.set(\"Server_IPs\", \"172.21.107.23\\\", \\\"172.21.107.22\");",
              "pm.collectionVariables.set(\"Server_Port\", 443);",
              "pm.collectionVariables.set(\"Redirect_80\", true);",
              "pm.collectionVariables.set(\"Monitor_Send_String\", \"GET / HTTP/1.1\\\\r\\\\nHost: example.com\\\\r\\\\nConnection: Close\\\\r\\\\n\\\\r\\\\n\");"
            ],
            "id": "a6d95ff7-ef0f-4117-8c04-543c54776a35"
          }
        },
        {
          "listen": "test",
          "script": {
            "type": "text/javascript",
            "exec": [
              ""
            ],
            "id": "1aa8eace-2533-4828-9b5e-dc09f2446083"
          }
        }
      ]
    },
    {
      "name": "Show All Apps using AS3s",
      "id": "f7d1416d-c5df-4655-8873-42df80402c55",
      "protocolProfileBehavior": {
        "disableBodyPruning": true
      },
      "request": {
        "method": "GET",
        "header": [],
        "url": "https://{{host}}/mgmt/shared/appsvcs/declare"
      },
      "response": []
    }
  ],
  "auth": {
    "type": "basic",
    "basic": {
      "password": "Svfs$LY$t5W^Y8cF",
      "username": "admin"
    }
  },
  "event": [
    {
      "listen": "prerequest",
      "script": {
        "id": "f8a12ce2-61dd-43ff-a541-285b8183e2b2",
        "type": "text/javascript",
        "exec": [
          ""
        ]
      }
    },
    {
      "listen": "test",
      "script": {
        "id": "a33f1780-0212-4007-a154-769d857c446f",
        "type": "text/javascript",
        "exec": [
          ""
        ]
      }
    }
  ]
}